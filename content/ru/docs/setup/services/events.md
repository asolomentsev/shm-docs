
---
title: "События"
---

События генерируются SHM, для возможности привязки команд.

Событие происходит между переходом услуги пользователя из одного статуса в другой.


## Список cобытий

| Event             | Статус ДО | Статус ПОСЛЕ |  Описание                                                         |
|:------------------|:---------:|:------------:|-------------------------------------------------------------------|
| create            | INIT      | ACTIVE       | Услуга создана и оплачена (впервые)                               |
| not_enough_money | INIT      | NOT_PAID     | Не хватает денег для создания услуги                              |
| prolongate        | ACTIVE    | ACTIVE       | Услуга продлена (хватило денег для продления активной услуги)     |
| block             | ACTIVE    | BLOCK        | Услуга заблокирована (нехватка денег для продления, либо вручную) |
| activate          | BLOCK     | ACTIVE       | Услуга активирована (возобновлена после блокировки)               |
| remove            | BLOCK     | REMOVED      | Услуга удалена                                                    |

Если для события настроена команда, то пользовательской услуге будет присвоен промежуточный статус: `PROGRESS`,
а после выполнения команды пользовательской услуге будет присвоен результирующий статус.

Вот так будет выглядеть создание услуги с настроеным событием:

`INIT -> PROGRESS (выполнение команды) -> ACTIVE`

## Настройка событий

Для события необходимо указать "Категорию" услуги и "Группу серверов", для выполнения команд.

Категория события должна соответвовать категории услуги, для которой создается это событие и может быть указана с маской,
например: `vpn-*`, где `*` заменяет любые символы.

В зависимости от выбранной группы серверов, могут быть использованы дополнительные настройки, зависящие от [Транспорта]({{< ref "/docs/setup/servers/transport" >}}) группы.

Например, если выбрана группа серверов, транспорт которой определен как ["SSH"]({{< ref "/docs/setup/servers/transport/ssh" >}}), то будет предложено выбрать шаблон в качестве скрипта, который должен быть выполнен на конечном сервере.
Используйте [Шаблоны]({{< ref "/docs/setup/templates" >}}) для написания команд.

А если выбрана группа серверов, транспорт которой определен как ["Mail"]({{< ref "/docs/setup/servers/transport/mail" >}}), то можно настроить поле ["Шаблон"]({{< ref "/docs/setup/templates" >}}) (`template_id`), по которому будет
сформировано письмо, а так-же другие поля, такие как "Тема письма" (`subject`) и прочие.

Настройки серверов можно переопределять настройками событий.




